<!DOCTYPE html>
  <html lang="en">
    <head>
      <meta charset="UTF-8">
      <meta name="description" content="Home Page">
      <title>Home Page | My Cat</title>
      <link rel="stylesheet" href="styles.css">
    </head>
    <body>
      <h1 class="centred_text">Say hello to the kitty cat!</h1>
        <img src="images/my_cat1.jpg" alt="A picture of my cat" class="centred_image">
        <h3 class="centred_text">My cat is a domestic short haired bundle of affection and spikiness. Think teddy bear mixed with cactus ^___^</h3>
        <h3 class="centred_text">About Domestic Shorthair Cats</h3>
          <p class="centred_text">
            Domestic Shorthair cats are not a specific breed. They're a diverse group of mixed-breed cats with short coats. Known for their adaptability and affectionate nature.
            They come in a wide range of colors, patterns, and sizes. These cats typically have muscular builds and require minimal grooming due to their sleek, dense fur.
            Domestic Shorthairs are generally healthy and resilient thanks to their varied genetic background, and they often live 12 to 20 years with proper care.
            Their personalities can vary widely: Some are playful and energetic, while others are calm and cuddly, making them excellent companions for families, singles, and seniors alike.
          </p>

<div id="guessing-game">
  <h2>ðŸŽ® Play the Cat's Favourite Guessing Game</h2>
    <input type="text" id="userInput" placeholder="Enter your guess here">
  <button onclick="submitInput()">Submit</button>
  <div id="output"></div>

  <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
  <script>
    let pyodideReady = false;
    let pyodide;
    let gameState = {
      number: Math.floor(Math.random() * 6) + 1,
      attempts: 0,
      play: "y",
      inReplayPrompt: false
    };

    async function setupPyodide() {
      pyodide = await loadPyodide();
      pyodideReady = true;
      printToOutput("Guess the randomly selected number between 1 and 6.\nYou have 3 guesses.\n");
    }

    function printToOutput(text) {
      const output = document.getElementById("output");
      output.innerText += text + "\n";
    }

    async function submitInput() {
      if (!pyodideReady) return;

      let input = document.getElementById("userInput").value.trim();
      document.getElementById("userInput").value = "";

      if (gameState.inReplayPrompt) {
        if (input.toLowerCase() === "y") {
          gameState.number = Math.floor(Math.random() * 6) + 1;
          gameState.attempts = 0;
          gameState.inReplayPrompt = false;
          printToOutput("\nNew game started!\nGuess the number between 1 and 6.\n");
          return;
        } else {
          printToOutput("Thanks for playing!");
          return;
        }
      }

      let code = `
user_input = "${input}"
number = ${gameState.number}
attempts = ${gameState.attempts}
output = ""

try:
    guess = int(user_input)
    if guess not in range(1, 7):
        output += "Must be a number between 1 and 6.\\n"
    elif guess == number:
        output += "Well done - you guessed it!\\n"
        attempts = 3
    elif guess < number:
        output += "Too low - try again.\\n"
        attempts += 1
    elif guess > number:
        output += "Too high - try again.\\n"
        attempts += 1
except:
    output += "Invalid input. Enter a number between 1 and 6.\\n"

output, attempts
      `;

      let [result, newAttempts] = await pyodide.runPythonAsync(code);
      gameState.attempts = newAttempts;
      printToOutput(result);

      if (gameState.attempts >= 3 && input != gameState.number) {
        printToOutput(`OUT OF GUESSES\nThe number was ${gameState.number}\nGAME OVER!\n`);
        printToOutput("Enter 'y' to play again or 'n' to quit.");
        gameState.inReplayPrompt = true;
      }
    }

    setupPyodide();
  </script>
</div>
    </body>
  </html>